define(["./when-b43ff45e","./Check-d404a0fe","./Math-336da716","./Cartesian3-2b5b9afe","./Cartesian2-577f67dc","./Transforms-18f02e2b","./RuntimeError-bf10f3d5","./WebGLConstants-56de22c0","./ComponentDatatype-8956ad9a","./GeometryAttribute-5eb995bc","./JulianDate-53cdb307","./RequestType-beb1291d","./EncodedCartesian3-f0c89625","./IntersectionTests-8ff35218","./Plane-5b30f0ff","./WebMercatorProjection-8f9f9d73","./arrayRemoveDuplicates-a7dee4b8","./ArcType-46047bc6","./EllipsoidRhumbLine-b4761ded","./EllipsoidGeodesic-47c65dee"],function(B,e,He,Ve,Be,Ge,a,t,je,Ye,i,n,Xe,G,r,s,j,Y,X,T){"use strict";function o(e){e=B.defaultValue(e,B.defaultValue.EMPTY_OBJECT),B.defined(e.tileInfo)&&B.defined(e.tileInfo.spatialReference)&&4490===e.tileInfo.spatialReference.wkid?(this._ellipsoid=B.defaultValue(e.ellipsoid,Be.Ellipsoid.CGCS2000),this._numberOfLevelZeroTilesX=B.defaultValue(e.numberOfLevelZeroTilesX,4),this._numberOfLevelZeroTilesY=B.defaultValue(e.numberOfLevelZeroTilesY,2)):(this._ellipsoid=B.defaultValue(e.ellipsoid,Be.Ellipsoid.WGS84),this._numberOfLevelZeroTilesX=B.defaultValue(e.numberOfLevelZeroTilesX,2),this._numberOfLevelZeroTilesY=B.defaultValue(e.numberOfLevelZeroTilesY,1)),this._rectangle=B.defaultValue(e.rectangle,Be.Rectangle.MAX_VALUE),this._projection=new Ge.GeographicProjection(this._ellipsoid),this._tileInfo=e.tileInfo}Object.defineProperties(o.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},rectangle:{get:function(){return this._rectangle}},projection:{get:function(){return this._projection}}}),o.prototype.getNumberOfXTilesAtLevel=function(a){if(B.defined(this._tileInfo)){var e=this._tileInfo.lods.filter(function(e){return e.level===a})[0].resolution;return Math.round(360/(this._tileInfo.rows*e))}return this._numberOfLevelZeroTilesX<<a},o.prototype.getNumberOfYTilesAtLevel=function(a){if(B.defined(this._tileInfo)){var e=this._tileInfo.lods.filter(function(e){return e.level===a})[0].resolution;return Math.round(180/(this._tileInfo.cols*e))}return this._numberOfLevelZeroTilesY<<a},o.prototype.rectangleToNativeRectangle=function(e,a){var t=He.CesiumMath.toDegrees(e.west),i=He.CesiumMath.toDegrees(e.south),n=He.CesiumMath.toDegrees(e.east),r=He.CesiumMath.toDegrees(e.north);return B.defined(a)?(a.west=t,a.south=i,a.east=n,a.north=r,a):new Be.Rectangle(t,i,n,r)},o.prototype.tileXYToNativeRectangle=function(e,a,t,i){var n=this.tileXYToRectangle(e,a,t,i);return n.west=He.CesiumMath.toDegrees(n.west),n.south=He.CesiumMath.toDegrees(n.south),n.east=He.CesiumMath.toDegrees(n.east),n.north=He.CesiumMath.toDegrees(n.north),n},o.prototype.tileXYToRectangle=function(e,a,t,i){var n,r,s,o,l,u=this._rectangle,c=0,C=0,d=0,h=0;return C=B.defined(this._tileInfo)?(n=this._tileInfo.lods.filter(function(e){return e.level===t})[0].resolution,h=this._tileInfo.origin.y-a*(this._tileInfo.cols*n),d=this._tileInfo.origin.x+e*(this._tileInfo.rows*n),C=this._tileInfo.origin.y-(a+1)*(this._tileInfo.cols*n),c=this._tileInfo.origin.x+(e+1)*(this._tileInfo.rows*n),d=He.CesiumMath.toRadians(d),h=He.CesiumMath.toRadians(h),c=He.CesiumMath.toRadians(c),He.CesiumMath.toRadians(C)):(r=this.getNumberOfXTilesAtLevel(t),s=this.getNumberOfYTilesAtLevel(t),d=e*(o=u.width/r)+u.west,c=(e+1)*o+u.west,l=u.height/s,h=u.north-a*l,u.north-(a+1)*l),B.defined(i)||(i=new Be.Rectangle(d,C,c,h)),i.west=d,i.south=C,i.east=c,i.north=h,i},o.prototype.positionToTileXY=function(e,a,t){var i,n,r,s,o,l,u,c,C,d,h=this._rectangle;if(Be.Rectangle.contains(h,e))return B.defined(this._tileInfo)?(i=this._tileInfo.lods.filter(function(e){return e.level===a})[0].resolution,n=He.CesiumMath.toDegrees(e.longitude),r=He.CesiumMath.toDegrees(e.latitude),s=Math.floor((n-this._tileInfo.origin.x)/(this._tileInfo.rows*i)),o=Math.floor((this._tileInfo.origin.y-r)/(this._tileInfo.cols*i))):(l=this.getNumberOfXTilesAtLevel(a),u=this.getNumberOfYTilesAtLevel(a),c=h.width/l,C=h.height/u,d=e.longitude,h.east<h.west&&(d+=He.CesiumMath.TWO_PI),l<=(s=(d-h.west)/c|0)&&(s=l-1),u<=(o=(h.north-e.latitude)/C|0)&&(o=u-1)),B.defined(t)?(t.x=s,t.y=o,t):new Be.Cartesian2(s,o)};var u=new Ve.Cartesian3,c=new Ve.Cartesian3,C=new Be.Cartographic,d=new Ve.Cartesian3,h=new Ve.Cartesian3,l=new Ge.BoundingSphere,p=new o,f=[new Be.Cartographic,new Be.Cartographic,new Be.Cartographic,new Be.Cartographic],g=new Be.Cartesian2,qe={};function m(e){Be.Cartographic.fromRadians(e.east,e.north,0,f[0]),Be.Cartographic.fromRadians(e.west,e.north,0,f[1]),Be.Cartographic.fromRadians(e.east,e.south,0,f[2]),Be.Cartographic.fromRadians(e.west,e.south,0,f[3]);for(var a=0,t=0,i=0,n=0,r=qe._terrainHeightsMaxLevel,s=0;s<=r;++s){for(var o=!1,l=0;l<4;++l){var u=f[l];if(p.positionToTileXY(u,s,g),0===l)i=g.x,n=g.y;else if(i!==g.x||n!==g.y){o=!0;break}}if(o)break;a=i,t=n}if(0!==s)return{x:a,y:t,level:r<s?r:s-1}}qe.initialize=function(){var e=qe._initPromise;return B.defined(e)?e:(e=Ge.Resource.fetchJson(Ge.buildModuleUrl("Assets/approximateTerrainHeights.js")).then(function(e){qe._terrainHeights=e}),qe._initPromise=e)},qe.getMinimumMaximumHeights=function(e,a){a=B.defaultValue(a,Be.Ellipsoid.WGS84);var t,i,n,r,s=m(e),o=qe._defaultMinTerrainHeight,l=qe._defaultMaxTerrainHeight;return B.defined(s)&&(t=s.level+"-"+s.x+"-"+s.y,i=qe._terrainHeights[t],B.defined(i)&&(o=i[0],l=i[1]),a.cartographicToCartesian(Be.Rectangle.northeast(e,C),u),a.cartographicToCartesian(Be.Rectangle.southwest(e,C),c),Ve.Cartesian3.midpoint(c,u,d),n=a.scaleToGeodeticSurface(d,h),o=B.defined(n)?(r=Ve.Cartesian3.distance(d,n),Math.min(o,-r)):qe._defaultMinTerrainHeight),{minimumTerrainHeight:o=Math.max(qe._defaultMinTerrainHeight,o),maximumTerrainHeight:l}},qe.getBoundingSphere=function(e,a){a=B.defaultValue(a,Be.Ellipsoid.WGS84);var t,i,n=m(e),r=qe._defaultMaxTerrainHeight;B.defined(n)&&(t=n.level+"-"+n.x+"-"+n.y,i=qe._terrainHeights[t],B.defined(i)&&(r=i[1]));var s=Ge.BoundingSphere.fromRectangle3D(e,a,0);return Ge.BoundingSphere.fromRectangle3D(e,a,r,l),Ge.BoundingSphere.union(s,l,s)},qe._terrainHeightsMaxLevel=6,qe._defaultMaxTerrainHeight=9e3,qe._defaultMinTerrainHeight=-1e5,qe._terrainHeights=void 0,qe._initPromise=void 0,Object.defineProperties(qe,{initialized:{get:function(){return B.defined(qe._terrainHeights)}}});var q=[Ge.GeographicProjection,s.WebMercatorProjection],w=q.length,Fe=Math.cos(He.CesiumMath.toRadians(30)),v=Math.cos(He.CesiumMath.toRadians(150)),F=0,Z=1e3;function y(e){var a=(e=B.defaultValue(e,B.defaultValue.EMPTY_OBJECT)).positions;this.width=B.defaultValue(e.width,1),this._positions=a,this.granularity=B.defaultValue(e.granularity,9999),this.loop=B.defaultValue(e.loop,!1),this.arcType=B.defaultValue(e.arcType,Y.ArcType.GEODESIC),this._ellipsoid=Be.Ellipsoid.WGS84,this._projectionIndex=0,this._workerName="createGroundPolylineGeometry",this._scene3DOnly=!1}Object.defineProperties(y.prototype,{packedLength:{get:function(){return 1+3*this._positions.length+1+1+1+Be.Ellipsoid.packedLength+1+1}}}),y.setProjectionAndEllipsoid=function(e,a){for(var t=0,i=0;i<w;i++)if(a instanceof q[i]){t=i;break}e._projectionIndex=t,e._ellipsoid=a.ellipsoid};var _=new Ve.Cartesian3,M=new Ve.Cartesian3,E=new Ve.Cartesian3;function W(e,a,t,i,n){var r=J(i,e,0,_),s=J(i,e,t,M),o=J(i,a,0,E),l=Ze(s,r,M),u=Ze(o,r,E);return Ve.Cartesian3.cross(u,l,n),Ve.Cartesian3.normalize(n,n)}var I=new Be.Cartographic,b=new Ve.Cartesian3,O=new Ve.Cartesian3,L=new Ve.Cartesian3;function U(e,a,t,i,n,r,s,o,l,u,c){if(0!==n){var C;r===Y.ArcType.GEODESIC?C=new T.EllipsoidGeodesic(e,a,s):r===Y.ArcType.RHUMB&&(C=new X.EllipsoidRhumbLine(e,a,s));var d=C.surfaceDistance;if(!(d<n))for(var h=W(e,a,i,s,L),p=Math.ceil(d/n),f=d/p,g=f,m=p-1,w=o.length,v=0;v<m;v++){var y=C.interpolateUsingSurfaceDistance(g,I),_=J(s,y,t,b),M=J(s,y,i,O);Ve.Cartesian3.pack(h,o,w),Ve.Cartesian3.pack(_,l,w),Ve.Cartesian3.pack(M,u,w),c.push(y.latitude),c.push(y.longitude),w+=3,g+=f}}}var P=new Be.Cartographic;function J(e,a,t,i){return Be.Cartographic.clone(a,P),P.height=t,Be.Cartographic.toCartesian(P,e,i)}function Ze(e,a,t){return Ve.Cartesian3.subtract(e,a,t),Ve.Cartesian3.normalize(t,t),t}function k(e,a,t,i){return i=Ze(e,a,i),i=Ve.Cartesian3.cross(i,t,i),i=Ve.Cartesian3.normalize(i,i),i=Ve.Cartesian3.cross(t,i,i)}y.pack=function(e,a,t){var i=B.defaultValue(t,0),n=e._positions,r=n.length;a[i++]=r;for(var s=0;s<r;++s){var o=n[s];Ve.Cartesian3.pack(o,a,i),i+=3}return a[i++]=e.granularity,a[i++]=e.loop?1:0,a[i++]=e.arcType,Be.Ellipsoid.pack(e._ellipsoid,a,i),i+=Be.Ellipsoid.packedLength,a[i++]=e._projectionIndex,a[i++]=e._scene3DOnly?1:0,a},y.unpack=function(e,a,t){for(var i=B.defaultValue(a,0),n=e[i++],r=new Array(n),s=0;s<n;s++)r[s]=Ve.Cartesian3.unpack(e,i),i+=3;var o=e[i++],l=1===e[i++],u=e[i++],c=Be.Ellipsoid.unpack(e,i);i+=Be.Ellipsoid.packedLength;var C=e[i++],d=1===e[i++];return B.defined(t)||(t=new y({positions:r})),t._positions=r,t.granularity=o,t.loop=l,t.arcType=u,t._ellipsoid=c,t._projectionIndex=C,t._scene3DOnly=d,t};var A=new Ve.Cartesian3,S=new Ve.Cartesian3,R=new Ve.Cartesian3,x=new Ve.Cartesian3;function Q(e,a,t,i,n){var r=Ze(t,a,x),s=k(e,a,r,A),o=k(i,a,r,S);if(He.CesiumMath.equalsEpsilon(Ve.Cartesian3.dot(s,o),-1,He.CesiumMath.EPSILON5))return n=Ve.Cartesian3.cross(r,s,n),n=Ve.Cartesian3.normalize(n,n);n=Ve.Cartesian3.add(o,s,n),n=Ve.Cartesian3.normalize(n,n);var l=Ve.Cartesian3.cross(r,n,R);return Ve.Cartesian3.dot(o,l)<0&&(n=Ve.Cartesian3.negate(n,n)),n}var K=r.Plane.fromPointNormal(Ve.Cartesian3.ZERO,Ve.Cartesian3.UNIT_Y),$=new Ve.Cartesian3,ee=new Ve.Cartesian3,ae=new Ve.Cartesian3,te=new Ve.Cartesian3,ie=new Ve.Cartesian3,ne=new Ve.Cartesian3,re=new Be.Cartographic,se=new Be.Cartographic,oe=new Be.Cartographic;y.createGeometry=function(e){var a,t,i,n,r,s=!e._scene3DOnly,o=e.loop,l=e._ellipsoid,u=e.granularity,c=e.arcType,C=new q[e._projectionIndex](l),d=F,h=Z,p=e._positions,f=p.length;2===f&&(o=!1);for(var g,m,w,v=new X.EllipsoidRhumbLine(void 0,void 0,l),y=[p[0]],_=0;_<f-1;_++)t=p[_],i=p[_+1],g=G.IntersectionTests.lineSegmentPlane(t,i,K,ne),!B.defined(g)||Ve.Cartesian3.equalsEpsilon(g,t,He.CesiumMath.EPSILON7)||Ve.Cartesian3.equalsEpsilon(g,i,He.CesiumMath.EPSILON7)||(e.arcType===Y.ArcType.GEODESIC?y.push(Ve.Cartesian3.clone(g)):e.arcType===Y.ArcType.RHUMB&&(w=l.cartesianToCartographic(g,re).longitude,n=l.cartesianToCartographic(t,re),r=l.cartesianToCartographic(i,se),v.setEndPoints(n,r),m=v.findIntersectionWithLongitude(w,oe),g=l.cartographicToCartesian(m,ne),!B.defined(g)||Ve.Cartesian3.equalsEpsilon(g,t,He.CesiumMath.EPSILON7)||Ve.Cartesian3.equalsEpsilon(g,i,He.CesiumMath.EPSILON7)||y.push(Ve.Cartesian3.clone(g)))),y.push(i);o&&(t=p[f-1],i=p[0],g=G.IntersectionTests.lineSegmentPlane(t,i,K,ne),!B.defined(g)||Ve.Cartesian3.equalsEpsilon(g,t,He.CesiumMath.EPSILON7)||Ve.Cartesian3.equalsEpsilon(g,i,He.CesiumMath.EPSILON7)||(e.arcType===Y.ArcType.GEODESIC?y.push(Ve.Cartesian3.clone(g)):e.arcType===Y.ArcType.RHUMB&&(w=l.cartesianToCartographic(g,re).longitude,n=l.cartesianToCartographic(t,re),r=l.cartesianToCartographic(i,se),v.setEndPoints(n,r),m=v.findIntersectionWithLongitude(w,oe),g=l.cartographicToCartesian(m,ne),!B.defined(g)||Ve.Cartesian3.equalsEpsilon(g,t,He.CesiumMath.EPSILON7)||Ve.Cartesian3.equalsEpsilon(g,i,He.CesiumMath.EPSILON7)||y.push(Ve.Cartesian3.clone(g)))));var M=y.length,T=new Array(M);for(_=0;_<M;_++){var E=Be.Cartographic.fromCartesian(y[_],l);E.height=0,T[_]=E}if(!((M=(T=j.arrayRemoveDuplicates(T,Be.Cartographic.equalsEpsilon)).length)<2)){var I=[],b=[],O=[],L=[],P=$,k=ee,A=ae,S=te,R=ie,x=T[0],D=T[1];for(P=J(l,T[M-1],d,P),S=J(l,D,d,S),k=J(l,x,d,k),A=J(l,x,h,A),R=o?Q(P,k,A,S,R):W(x,D,h,l,R),Ve.Cartesian3.pack(R,b,0),Ve.Cartesian3.pack(k,O,0),Ve.Cartesian3.pack(A,L,0),I.push(x.latitude),I.push(x.longitude),U(x,D,d,h,u,c,l,b,O,L,I),_=1;_<M-1;++_){P=Ve.Cartesian3.clone(k,P),k=Ve.Cartesian3.clone(S,k);var N=T[_];J(l,N,h,A),J(l,T[_+1],d,S),Q(P,k,A,S,R),a=b.length,Ve.Cartesian3.pack(R,b,a),Ve.Cartesian3.pack(k,O,a),Ve.Cartesian3.pack(A,L,a),I.push(N.latitude),I.push(N.longitude),U(T[_],T[_+1],d,h,u,c,l,b,O,L,I)}var z,H=T[M-1],V=T[M-2],k=J(l,H,d,k),A=J(l,H,h,A);if(R=o?(z=T[0],Q(P=J(l,V,d,P),k,A,S=J(l,z,d,S),R)):W(V,H,h,l,R),a=b.length,Ve.Cartesian3.pack(R,b,a),Ve.Cartesian3.pack(k,O,a),Ve.Cartesian3.pack(A,L,a),I.push(H.latitude),I.push(H.longitude),o){for(U(H,x,d,h,u,c,l,b,O,L,I),a=b.length,_=0;_<3;++_)b[a+_]=b[_],O[a+_]=O[_],L[a+_]=L[_];I.push(x.latitude),I.push(x.longitude)}return function(e,a,t,i,n,r,s){var o,l,u,c,C,d,h=a._ellipsoid,p=t.length/3-1,f=8*p,g=4*f,m=36*p,w=new(65535<f?Uint32Array:Uint16Array)(m),v=new Float64Array(3*f),y=new Float32Array(g),_=new Float32Array(g),M=new Float32Array(g),T=new Float32Array(g),E=new Float32Array(g);s&&(u=new Float32Array(g),c=new Float32Array(g),C=new Float32Array(g),d=new Float32Array(2*f));var I=r.length/2,b=0,O=$e;O.height=0;var L=ea;L.height=0;var P=aa,k=ta;if(s)for(l=0,o=1;o<I;o++)O.latitude=r[l],O.longitude=r[l+1],L.latitude=r[l+2],L.longitude=r[l+3],P=a.project(O,P),k=a.project(L,k),b+=Ve.Cartesian3.distance(P,k),l+=2;var A=i.length/3;k=Ve.Cartesian3.unpack(i,0,k);var S,R=0;for(l=3,o=1;o<A;o++)P=Ve.Cartesian3.clone(k,P),k=Ve.Cartesian3.unpack(i,l,k),R+=Ve.Cartesian3.distance(P,k),l+=3;l=3;var x=0,D=0,N=0,z=0,H=!1,V=Ve.Cartesian3.unpack(t,0,na),B=Ve.Cartesian3.unpack(i,0,ta),G=Ve.Cartesian3.unpack(n,0,sa);{var j;e&&(j=Ve.Cartesian3.unpack(t,t.length-6,ia),We(G,j,V,B)&&(G=Ve.Cartesian3.negate(G,G)))}var Y,X,q,F,Z,W,U,J=0,Q=0,K=0;for(o=0;o<p;o++){var $,ee,ae=Ve.Cartesian3.clone(V,ia),te=Ve.Cartesian3.clone(B,aa),ie=Ve.Cartesian3.clone(G,ra);H&&(ie=Ve.Cartesian3.negate(ie,ie)),V=Ve.Cartesian3.unpack(t,l,na),B=Ve.Cartesian3.unpack(i,l,ta),G=Ve.Cartesian3.unpack(n,l,sa),H=We(G,ae,V,B),O.latitude=r[x],O.longitude=r[x+1],L.latitude=r[x+2],L.longitude=r[x+3],s&&($=Ke(O,L),Y=a.project(O,ha),(ee=Ze(X=a.project(L,pa),Y,Ia)).y=Math.abs(ee.y),q=fa,F=ga,0===$||Ve.Cartesian3.dot(ee,Ve.Cartesian3.UNIT_Y)>Fe?(q=Ue(a,O,ie,Y,fa),F=Ue(a,L,G,X,ga)):1===$?(F=Ue(a,L,G,X,ga),q.x=0,q.y=He.CesiumMath.sign(O.longitude-Math.abs(L.longitude)),q.z=0):(q=Ue(a,O,ie,Y,fa),F.x=0,F.y=He.CesiumMath.sign(O.longitude-L.longitude),F.z=0));var ne=Ve.Cartesian3.distance(te,B),re=Xe.EncodedCartesian3.fromCartesian(ae,Ta),se=Ve.Cartesian3.subtract(V,ae,ma),oe=Ve.Cartesian3.normalize(se,ya),le=Ve.Cartesian3.subtract(te,ae,wa);le=Ve.Cartesian3.normalize(le,le);var ue=Ve.Cartesian3.cross(oe,le,ya);ue=Ve.Cartesian3.normalize(ue,ue);var ce=Ve.Cartesian3.cross(le,ie,_a);ce=Ve.Cartesian3.normalize(ce,ce);var Ce=Ve.Cartesian3.subtract(B,V,va);Ce=Ve.Cartesian3.normalize(Ce,Ce);var de=Ve.Cartesian3.cross(G,Ce,Ma);de=Ve.Cartesian3.normalize(de,de);var he,pe=ne/R,fe=J/R,ge=0,me=0,we=0;for(s&&(ge=Ve.Cartesian3.distance(Y,X),Z=Xe.EncodedCartesian3.fromCartesian(Y,Ea),W=Ve.Cartesian3.subtract(X,Y,Ia),he=(U=Ve.Cartesian3.normalize(W,ba)).x,U.x=U.y,U.y=-he,me=ge/b,we=Q/b),S=0;S<8;S++){var ve=z+4*S,ye=D+2*S,_e=ve+3,Me=S<4?1:-1,Te=2===S||3===S||6===S||7===S?1:-1;Ve.Cartesian3.pack(re.high,y,ve),y[_e]=se.x,Ve.Cartesian3.pack(re.low,_,ve),_[_e]=se.y,Ve.Cartesian3.pack(ce,M,ve),M[_e]=se.z,Ve.Cartesian3.pack(de,T,ve),T[_e]=pe*Me,Ve.Cartesian3.pack(ue,E,ve);var Ee=fe*Te;0===Ee&&Te<0&&(Ee=9),E[_e]=Ee,s&&(u[ve]=Z.high.x,u[ve+1]=Z.high.y,u[ve+2]=Z.low.x,u[ve+3]=Z.low.y,C[ve]=-q.y,C[ve+1]=q.x,C[ve+2]=F.y,C[ve+3]=-F.x,c[ve]=W.x,c[ve+1]=W.y,c[ve+2]=U.x,c[ve+3]=U.y,d[ye]=me*Me,0===(Ee=we*Te)&&Te<0&&(Ee=9),d[ye+1]=Ee)}var Ie=Ca,be=da,Oe=ua,Le=ca,Pe=Be.Rectangle.fromCartographicArray(oa,la),ke=qe.getMinimumMaximumHeights(Pe,h),Ae=ke.minimumTerrainHeight,Se=ke.maximumTerrainHeight;K+=Ae,K+=Se,Je(ae,te,Ae,Se,Ie,Oe),Je(V,B,Ae,Se,be,Le);var Re=Ve.Cartesian3.multiplyByScalar(ue,He.CesiumMath.EPSILON5,Oa);Ve.Cartesian3.add(Ie,Re,Ie),Ve.Cartesian3.add(be,Re,be),Ve.Cartesian3.add(Oe,Re,Oe),Ve.Cartesian3.add(Le,Re,Le),Qe(Ie,be),Qe(Oe,Le),Ve.Cartesian3.pack(Ie,v,N),Ve.Cartesian3.pack(be,v,N+3),Ve.Cartesian3.pack(Le,v,N+6),Ve.Cartesian3.pack(Oe,v,N+9),Re=Ve.Cartesian3.multiplyByScalar(ue,-2*He.CesiumMath.EPSILON5,Oa),Ve.Cartesian3.add(Ie,Re,Ie),Ve.Cartesian3.add(be,Re,be),Ve.Cartesian3.add(Oe,Re,Oe),Ve.Cartesian3.add(Le,Re,Le),Qe(Ie,be),Qe(Oe,Le),Ve.Cartesian3.pack(Ie,v,N+12),Ve.Cartesian3.pack(be,v,N+15),Ve.Cartesian3.pack(Le,v,N+18),Ve.Cartesian3.pack(Oe,v,N+21),x+=2,l+=3,D+=16,N+=24,z+=32,J+=ne,Q+=ge}var xe=l=0;for(o=0;o<p;o++){for(S=0;S<ka;S++)w[l+S]=Pa[S]+xe;xe+=8,l+=ka}var De=La;Ge.BoundingSphere.fromVertices(t,Ve.Cartesian3.ZERO,3,De[0]),Ge.BoundingSphere.fromVertices(i,Ve.Cartesian3.ZERO,3,De[1]);var Ne=Ge.BoundingSphere.fromBoundingSpheres(De);Ne.radius+=K/(2*p);var ze={position:new Ye.GeometryAttribute({componentDatatype:je.ComponentDatatype.DOUBLE,componentsPerAttribute:3,normalize:!1,values:v}),startHiAndForwardOffsetX:Aa(y),startLoAndForwardOffsetY:Aa(_),startNormalAndForwardOffsetZ:Aa(M),endNormalAndTextureCoordinateNormalizationX:Aa(T),rightNormalAndTextureCoordinateNormalizationY:Aa(E)};s&&(ze.startHiLo2D=Aa(u),ze.offsetAndRight2D=Aa(c),ze.startEndNormals2D=Aa(C),ze.texcoordNormalization2D=new Ye.GeometryAttribute({componentDatatype:je.ComponentDatatype.FLOAT,componentsPerAttribute:2,normalize:!1,values:d}));return new Ye.Geometry({attributes:ze,indices:w,boundingSphere:Ne})}(o,C,O,L,b,I,s)}};var D=new Ve.Cartesian3,N=new Ge.Matrix3,z=new Ge.Quaternion;function We(e,a,t,i){var n=Ze(t,a,D),r=Ve.Cartesian3.dot(n,e);if(Fe<r||r<v){var s=Ze(i,t,x),o=r<v?He.CesiumMath.PI_OVER_TWO:-He.CesiumMath.PI_OVER_TWO,l=Ge.Quaternion.fromAxisAngle(s,o,z),u=Ge.Matrix3.fromQuaternion(l,N);return Ge.Matrix3.multiplyByVector(u,e,e),!0}return!1}var H=new Be.Cartographic,V=new Ve.Cartesian3,le=new Ve.Cartesian3;function Ue(e,a,t,i,n){var r=Be.Cartographic.toCartesian(a,e._ellipsoid,V),s=Ve.Cartesian3.add(r,t,le),o=!1,l=e._ellipsoid,u=l.cartesianToCartographic(s,H);Math.abs(a.longitude-u.longitude)>He.CesiumMath.PI_OVER_TWO&&(o=!0,s=Ve.Cartesian3.subtract(r,t,le),u=l.cartesianToCartographic(s,H)),u.height=0;var c=e.project(u,n);return(n=Ve.Cartesian3.subtract(c,i,n)).z=0,n=Ve.Cartesian3.normalize(n,n),o&&Ve.Cartesian3.negate(n,n),n}var ue=new Ve.Cartesian3,ce=new Ve.Cartesian3;function Je(e,a,t,i,n,r){var s=Ve.Cartesian3.subtract(a,e,ue);Ve.Cartesian3.normalize(s,s);var o=t-F,l=Ve.Cartesian3.multiplyByScalar(s,o,ce);Ve.Cartesian3.add(e,l,n);var u=i-Z,l=Ve.Cartesian3.multiplyByScalar(s,u,ce);Ve.Cartesian3.add(a,l,r)}var Ce=new Ve.Cartesian3;function Qe(e,a){var t=r.Plane.getPointDistance(K,e),i=r.Plane.getPointDistance(K,a),n=Ce;He.CesiumMath.equalsEpsilon(t,0,He.CesiumMath.EPSILON2)?(n=Ze(a,e,n),Ve.Cartesian3.multiplyByScalar(n,He.CesiumMath.EPSILON2,n),Ve.Cartesian3.add(e,n,e)):He.CesiumMath.equalsEpsilon(i,0,He.CesiumMath.EPSILON2)&&(n=Ze(e,a,n),Ve.Cartesian3.multiplyByScalar(n,He.CesiumMath.EPSILON2,n),Ve.Cartesian3.add(a,n,a))}function Ke(e,a){var t=Math.abs(e.longitude),i=Math.abs(a.longitude);if(He.CesiumMath.equalsEpsilon(t,He.CesiumMath.PI,He.CesiumMath.EPSILON11)){var n=He.CesiumMath.sign(a.longitude);return e.longitude=n*(t-He.CesiumMath.EPSILON11),1}if(He.CesiumMath.equalsEpsilon(i,He.CesiumMath.PI,He.CesiumMath.EPSILON11)){var r=He.CesiumMath.sign(e.longitude);return a.longitude=r*(i-He.CesiumMath.EPSILON11),2}return 0}var $e=new Be.Cartographic,ea=new Be.Cartographic,aa=new Ve.Cartesian3,ta=new Ve.Cartesian3,ia=new Ve.Cartesian3,na=new Ve.Cartesian3,ra=new Ve.Cartesian3,sa=new Ve.Cartesian3,oa=[$e,ea],la=new Be.Rectangle,ua=new Ve.Cartesian3,ca=new Ve.Cartesian3,Ca=new Ve.Cartesian3,da=new Ve.Cartesian3,ha=new Ve.Cartesian3,pa=new Ve.Cartesian3,fa=new Ve.Cartesian3,ga=new Ve.Cartesian3,ma=new Ve.Cartesian3,wa=new Ve.Cartesian3,va=new Ve.Cartesian3,ya=new Ve.Cartesian3,_a=new Ve.Cartesian3,Ma=new Ve.Cartesian3,Ta=new Xe.EncodedCartesian3,Ea=new Xe.EncodedCartesian3,Ia=new Ve.Cartesian3,ba=new Ve.Cartesian3,Oa=new Ve.Cartesian3,La=[new Ge.BoundingSphere,new Ge.BoundingSphere],Pa=[0,2,1,0,3,2,0,7,3,0,4,7,0,5,4,0,1,5,5,7,4,5,6,7,5,2,6,5,1,2,3,6,2,3,7,6],ka=Pa.length;function Aa(e){return new Ye.GeometryAttribute({componentDatatype:je.ComponentDatatype.FLOAT,componentsPerAttribute:4,normalize:!1,values:e})}return y._projectNormal=Ue,function(e,a){return qe.initialize().then(function(){return B.defined(a)&&(e=y.unpack(e,a)),y.createGeometry(e)})}});
