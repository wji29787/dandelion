define(["./when-b43ff45e","./Check-d404a0fe","./Math-336da716","./Cartesian3-2b5b9afe","./Cartesian2-577f67dc","./Transforms-18f02e2b","./RuntimeError-bf10f3d5","./WebGLConstants-56de22c0","./JulianDate-53cdb307","./RequestType-beb1291d","./IndexDatatype-c5295474","./createTaskProcessorWorker","./Color-b5533cf2"],function(W,o,e,A,D,S,r,t,a,i,G,n,I){"use strict";return n(function(o,e){for(var r=o.traceWalls,t=(S.Transforms.localFrameToFixedFrameGenerator("north","west"),r.length),a=[],i=0,n=0,s=0;s<t;s++)if(W.defined(r[s])&&1<r[s].trackPoints.length){var f=r[s].trackPoints,l=[],d=f.length;if(300<d){for(var p=d-50,u=Math.floor(p/250)+1,c=d-50-u,h=0;h<c;h+=u){l.push({position:f[h].wcPosition});var C=D.Cartographic.fromCartesian(f[h].wcPosition),g=A.Cartesian3.fromRadians(C.longitude,C.latitude);l.push({position:g}),i+=2}for(;h<d-1;h++){l.push({position:f[h].wcPosition});C=D.Cartographic.fromCartesian(f[h].wcPosition),g=A.Cartesian3.fromRadians(C.longitude,C.latitude);l.push({position:g}),i+=2}}else for(var b=0;b<f.length;b++){l.push({position:f[b].wcPosition});C=D.Cartographic.fromCartesian(f[b].wcPosition),g=A.Cartesian3.fromRadians(C.longitude,C.latitude);l.push({position:g}),i+=2}a.push(l),n+=3*(i-2)}if(0!=a.length){for(var y=new S.BoundingSphere,m=G.IndexDatatype.createTypedArray(i,n),w=new Float64Array(3*i),v=new Uint8Array(4*i),T=0,P=0,s=0;s<a.length;s++){for(var B=r[s].color,k=(l=a[s]).length,x=0;x<k;x++){y=S.BoundingSphere.expand(y,l[x].position),w[3*(P+x)]=l[x].position.x,w[3*(P+x)+1]=l[x].position.y,w[3*(P+x)+2]=l[x].position.z;var R=1-(k-x)/k*1;v[4*(P+x)]=I.Color.floatToByte(B.red),v[4*(P+x)+1]=I.Color.floatToByte(B.green),v[4*(P+x)+2]=I.Color.floatToByte(B.blue),v[4*(P+x)+3]=I.Color.floatToByte(B.alpha*R)}for(var F=0;F+3<k;F+=2)m[T++]=P+F,m[T++]=P+F+1,m[T++]=P+F+2,m[T++]=P+F+1,m[T++]=P+F+3,m[T++]=P+F+2;P+=k}return o.traceWalls=void 0,{positionBuffer:w.buffer,colorBuffer:v.buffer,indices:m.buffer,boundingSphere:y}}})});
